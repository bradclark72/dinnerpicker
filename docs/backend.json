{
  "entities": {
    "User": {
      "title": "User",
      "description": "Represents a user of the Random Eats application.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the User entity, matches Firebase Auth UID." },
        "email": { "type": "string", "format": "email", "description": "The user's email address." },
        "picksUsed": { "type": "number", "description": "Number of restaurant picks the user has used." },
        "isPremium": { "type": "boolean", "description": "Indicates whether the user is a premium subscriber." }
      },
      "required": ["id", "email", "picksUsed", "isPremium"]
    },
    "Customer": {
      "title": "Customer",
      "description": "Represents a customer in the Stripe billing system.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "The Firebase Auth UID of the user." },
        "stripeId": { "type": "string", "description": "The Stripe Customer ID." },
        "stripeLink": { "type": "string", "description": "The Stripe subscription management link." }
      },
      "required": ["userId", "stripeId", "stripeLink"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": { "$ref": "#/backend/entities/User" },
          "description": "Stores user data including picksUsed and isPremium. This path utilizes path-based ownership; only the user with the matching {userId} can read or write to this document."
        }
      },
      {
        "path": "/customers/{userId}",
        "definition": {
          "entityName": "Customer",
          "schema": { "$ref": "#/backend/entities/Customer" },
          "description": "Stores Stripe customer information, linking a Firebase user to a Stripe customer."
        }
      }
    ]
  }
}
